# ğŸ“ˆ ç¾è‚¡é‡åŒ–äº¤æ˜“ç³»ç»Ÿ

åŸºäº Massive.com API + èˆ†æƒ…åˆ†æ + LLM è‡ªä¸»å†³ç­–çš„å®Œæ•´é‡åŒ–äº¤æ˜“ç³»ç»Ÿï¼Œå†…ç½®è‡ªåŠ¨å›æµ‹å’Œç­–ç•¥è¿­ä»£æœºåˆ¶ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- **æ•°æ®è·å–**: é€šè¿‡ Massive API è·å–ç¾è‚¡ä»·æ ¼ã€æŠ€æœ¯æŒ‡æ ‡ã€å…¬å¸è¡Œä¸ºç­‰æ•°æ®
- **èˆ†æƒ…åˆ†æ**: æ•´åˆ Finviz æ–°é—»ã€Reddit ç¤¾äº¤ã€Seeking Alpha åˆ†æå¸ˆè¯„çº§
- **LLM å†³ç­–**: åŸºäºç»¼åˆæ•°æ®ç”Ÿæˆäº¤æ˜“å†³ç­– (ä¹°å…¥/å–å‡º/æŒæœ‰ + å…·ä½“è‚¡æ•°)
- **è‡ªåŠ¨å›æµ‹**: åŸºäºå†å²æ•°æ®éªŒè¯ç­–ç•¥æ•ˆæœ
- **ç­–ç•¥è¿­ä»£**: è‡ªåŠ¨å¤ç›˜â†’è°ƒæ•´â†’å†éªŒè¯ï¼Œç›´åˆ°è¾¾åˆ°æ”¶ç›Šç›®æ ‡

## ğŸ“ é¡¹ç›®ç»“æ„

```
stock-trading/
â”œâ”€â”€ main.py                    # ä¸»å…¥å£è„šæœ¬
â”œâ”€â”€ skill.yaml                 # OpenClaw Skill é…ç½®
â”œâ”€â”€ requirements.txt           # Python ä¾èµ–
â”œâ”€â”€ skills/
â”‚   â””â”€â”€ SKILL.md              # æŠ€èƒ½æ–‡æ¡£
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py             # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ massive_api.py        # Massive API å°è£…
â”‚   â”œâ”€â”€ sentiment_api.py      # èˆ†æƒ…æ•°æ®è·å–
â”‚   â”œâ”€â”€ llm_decision.py       # LLM å†³ç­–æ¨¡å—
â”‚   â”œâ”€â”€ backtest.py           # å›æµ‹ç³»ç»Ÿ
â”‚   â””â”€â”€ strategy_runner.py    # ç­–ç•¥è¿­ä»£
â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ default_strategy.py   # é»˜è®¤ç­–ç•¥æ¨¡æ¿
â”œâ”€â”€ data/                     # å›æµ‹ç»“æœå­˜å‚¨
â””â”€â”€ logs/                     # æ—¥å¿—æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd stock-trading
python3 -m pip install -r requirements.txt
```

### 2. åˆ†æè‚¡ç¥¨

```bash
python3 main.py analyze AAPL
```

è¾“å‡ºç¤ºä¾‹:
```
ğŸ“Š åˆ†æè‚¡ç¥¨ï¼šAAPL

â³ è·å–å¸‚åœºæ•°æ®...
   å½“å‰ä»·æ ¼ï¼š$185.50
   ä»Šæ—¥å¼€ç›˜ï¼š$184.00
   ...

â³ è®¡ç®—æŠ€æœ¯æŒ‡æ ‡...
   RSI(14): 45.2
   MACD: 2.02
   ...

â³ åˆ†æèˆ†æƒ…...
   ç»¼åˆè¯„åˆ†ï¼š0.58 (Positive)
   ...

ğŸ¤– ç”Ÿæˆ LLM å†³ç­–æç¤ºè¯...
```

### 3. è¿è¡Œå›æµ‹

```bash
python3 main.py backtest AAPL --start 2024-01-01 --end 2024-12-31
```

è¾“å‡ºç¤ºä¾‹:
```
ğŸ“Š å›æµ‹ç»“æœ - AAPL
============================================================
å›æµ‹å‘¨æœŸï¼š2024-01-01 è‡³ 2024-12-31 (252 äº¤æ˜“æ—¥)

ğŸ’° èµ„é‡‘å˜åŒ–:
  åˆå§‹èµ„é‡‘ï¼š$10,000.00
  æœ€ç»ˆèµ„é‡‘ï¼š$12,350.00
  æ€»æ”¶ç›Šï¼š  $2,350.00

ğŸ“ˆ ç»©æ•ˆæŒ‡æ ‡:
  æ€»æ”¶ç›Šç‡ï¼š  +23.50%
  å¹´åŒ–æ”¶ç›Šï¼š  +23.50%
  æœ€å¤§å›æ’¤ï¼š  -8.25%
  å¤æ™®æ¯”ç‡ï¼š  1.85
  èƒœç‡ï¼š      62.5%
  ç›ˆäºæ¯”ï¼š    2.1
...
```

### 4. ç­–ç•¥è¿­ä»£

```bash
python3 main.py iterate AAPL,MSFT,GOOGL,NVDA --start 2024-01-01 --end 2024-12-31 --target-return 25
```

ç³»ç»Ÿä¼šè‡ªåŠ¨:
1. å¯¹æ¯åªè‚¡ç¥¨è¿›è¡Œå›æµ‹
2. æ£€æŸ¥æ˜¯å¦è¾¾åˆ°ç›®æ ‡ (æ”¶ç›Šç‡â‰¥25%, å›æ’¤â‰¤-15%, å¤æ™®â‰¥1.5)
3. æœªè¾¾æ ‡åˆ™åˆ†æåŸå› å¹¶æä¾›è°ƒæ•´å»ºè®®
4. ç»§ç»­æµ‹è¯•ä¸‹ä¸€åªè‚¡ç¥¨
5. ç”Ÿæˆæ€»ç»“æŠ¥å‘Š

### 5. æ£€æŸ¥å¸‚åœºçŠ¶æ€

```bash
python3 main.py status
```

## ğŸ“Š ç­–ç•¥é…ç½®

ç¼–è¾‘ `strategies/default_strategy.py` è‡ªå®šä¹‰äº¤æ˜“é€»è¾‘:

```python
def default_strategy(row, indicators):
    buy_conditions = []
    sell_conditions = []
    
    # RSI è¶…å–ä¹°å…¥
    if indicators.get('rsi_14', 50) < 30:
        buy_conditions.append("RSI è¶…å–")
    
    # MACD é‡‘å‰ä¹°å…¥
    if indicators.get('macd', 0) > indicators.get('macd_signal', 0):
        buy_conditions.append("MACD é‡‘å‰")
    
    # è‡³å°‘ 2 ä¸ªæ¡ä»¶æ»¡è¶³æ—¶ä¹°å…¥
    if len(buy_conditions) >= 2:
        return 'buy'
    
    return 'hold'
```

## ğŸ¯ ç›®æ ‡é…ç½®

ç¼–è¾‘ `src/config.py` è°ƒæ•´æ”¶ç›Šç›®æ ‡:

```python
TARGET_METRICS = {
    "min_total_return": 20.0,      # æœ€ä½æ€»æ”¶ç›Šç‡ 20%
    "max_drawdown": -15.0,         # æœ€å¤§å›æ’¤ä¸è¶…è¿‡ -15%
    "min_sharpe_ratio": 1.5,       # æœ€ä½å¤æ™®æ¯”ç‡ 1.5
    "min_win_rate": 55.0,          # æœ€ä½èƒœç‡ 55%
    "min_trades": 20               # æœ€å°‘äº¤æ˜“æ¬¡æ•°
}
```

## ğŸ”§ OpenClaw é›†æˆ

åœ¨ OpenClaw ä¸­ä½¿ç”¨:

```
/stock-trading analyze AAPL
/stock-trading backtest MSFT --start 2024-01-01
```

æˆ–é€šè¿‡ LLM ç›´æ¥è·å–äº¤æ˜“å†³ç­–:

```
è¯·åˆ†æ AAPL çš„å½“å‰æƒ…å†µï¼Œç»™å‡ºäº¤æ˜“å»ºè®®
```

ç³»ç»Ÿä¼šè‡ªåŠ¨:
1. è·å–æœ€æ–°å¸‚åœºæ•°æ®
2. è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
3. åˆ†æèˆ†æƒ…æƒ…ç»ª
4. è°ƒç”¨ LLM ç”Ÿæˆå†³ç­–
5. è¿”å›å…·ä½“çš„äº¤æ˜“å»ºè®® (ä¹°å…¥/å–å‡º/æŒæœ‰ + è‚¡æ•°)

## âš ï¸ æ³¨æ„äº‹é¡¹

### API é™åˆ¶ (Massive Starter)
- æ•°æ®å»¶è¿Ÿï¼š15 åˆ†é’Ÿ
- å†å²æ•°æ®ï¼šæœ€å¤š 5 å¹´
- API è°ƒç”¨ï¼šæ— é™
- Trades/Quotes æ•°æ®ï¼šä¸å¯ç”¨

### äº¤æ˜“é£é™©
- æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ å’Œç ”ç©¶
- å›æµ‹ç»“æœä¸ä»£è¡¨æœªæ¥æ”¶ç›Š
- å®ç›˜äº¤æ˜“éœ€è°¨æ…ï¼Œå»ºè®®å…ˆç”¨æ¨¡æ‹Ÿç›˜éªŒè¯
- æ—¥çº§åˆ«äº¤æ˜“ä¸é€‚åˆé«˜é¢‘æ“ä½œ

## ğŸ“ è¾“å‡ºæ–‡ä»¶

å›æµ‹ç»“æœä¿å­˜åœ¨ `data/` ç›®å½•:

- `backtest_{SYMBOL}_{START}_{END}.json` - å•æ¬¡å›æµ‹ç»“æœ
- `iteration_results.json` - ç­–ç•¥è¿­ä»£æ€»ç»“

## ğŸ“„ License

MIT License

---

**Version**: 4.0.0
**Author**: å° X (for GX)
**Updated**: 2026-02-27
